<!doctype html>
<html>
	<head>
		<style type="text/css">
			* {
				outline: 0;
				margin: 0;
				padding: 0;
			}
		
			label:before {
				content: attr(data-display);
				width: 150px;
				display: inline-block;
				margin: 50px 0 50px 150px;
			}
			
			label, input[type=text], button[type=submit] {
				font-size: 48px;
				width: 800px;
			}
			
			input[type=text] {
				border-radius: 20px;
			}
			
			input[type=text], button[type=submit] {
				padding: 15px;
			}
			
		</style>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
		<!-- OFFLINE CODE
		<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
		<script type="text/javascript" src="jquery-ui-1.8.21.custom.min.js"></script>
		-->
		<!--= check local storage for unprocessed requests
		= check amazons3
		= 
		-->
		
		
		<script type="text/javascript">
		$(document).ready(function(){
			
			//localStorage will store an array of objects of data blobs
			/*localStore = function(){
				return localStorage.setItem(this.key,JSON.stringify(this.value))
			}
			
			
			localGet = function(){
				return JSON.parse(localStorage.getItem(this.key));
			}*/		

			var access_token = "bcd040c99bfc7b878c6f49710558bca51ff24094";
			//for github user "scrooge-demo"
				
			function blob(key,value){
				this.key = key;//expect to be a valid key in key/value pair
				this.value = value;//expect it to be json

				tempData = {};//initialize empty object for creating data blob
				tempData[key] = value;
				this.data = tempData;

				this.github_url = 'https://api.github.com/repos/leknarf/scrooge-demo/git/blobs';//data for blobs				
				this.sha = '';//store the sha we get
				
				this.git_stored = false;
			}
			
			blob.prototype.get = function(){
				if(!this.git_stored){
					return {'error':'Not stored on github yet'};
				}
				
				$.ajax({
					url: this.github_url+'/'+this.sha+'?access_token='+access_token+'&callback=foo',
					type: 'GET',
					data: this.data,
					success: function(response){
						console.log(response);
					}
				});
			}
			
			blob.prototype.post = function(){
				$.ajax({
					url: this.github_url+'?access_token='+access_token+'&callback=foo',
					type: 'POST',
					data: this.data,
					success: function(response){
						this.sha = response.sha;
						console.log(response);
					}
				});
			}
			
			blob.prototype.delete = function(){
				//not implemented?
			}
			
			blob.prototype.put = function(){
				//not implemented?
			}			
			
			$("button[type=submit]").click(function(){
				b = new blob($("#key").val(),$("#value").val());
				b.post();
			});
		});		
		</script>
	</head>
	<body>
		<label for="key" data-display="Key: "></label><input type="text" name="key" id="key" placeholder="key"><br />
		<label for="value" data-display="Value: "></label><input type="text" name="value" id="value" placeholder="value"><br />
		<label for="absolutelyNothing"></label><button type="submit">Shiny Submission!</button>
	</body>
</html>